"use strict";(self.webpackChunkhello_world_app=self.webpackChunkhello_world_app||[]).push([[681],{681:(R,h,l)=>{l.r(h),l.d(h,{EditFileModule:()=>B});var g=l(6895),Z=l(3927),F=l(9299),T=l(1184),d=l(6308),r=l(7155),m=l(5412),t=l(4650),c=l(4006),x=l(7009),D=l(3518),A=l(529);let N=(()=>{class e{constructor(o){this.http=o}createFile(o,i,a){return this.http.post(`${D._}/create-file`,{fileName:o,fileContent:i,urlPath:a})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(A.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=l(4859),f=l(9549),C=l(4144);function b(e,n){if(1&e&&(t.TgZ(0,"div")(1,"mat-form-field",9)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",10),t.qZA()()),2&e){const o=n.$implicit;t.xp6(3),t.Oqu(o),t.xp6(1),t.Q6J("formControlName",o)}}let J=(()=>{class e{constructor(o,i,a,s,u){this.dialogRef=o,this.fileData=i,this.fb=a,this.snackBar=s,this.createFileService=u,this.formKeys=[],this.fileForm=this.fb.group({})}ngOnInit(){this.extractData(this.fileData)}extractData(o,i=""){for(const a in o)if(o.hasOwnProperty(a)){const s=i?`${i}.${a}`:a,u=o[a];"object"==typeof u&&null!==u?this.extractData(u,s):(this.formKeys.push(s),this.fileForm.addControl(s,this.fb.control(u)))}}create(){this.createFileService.createFile("novo_arquivo.json",this.fileForm.value,"datasets").subscribe({next:()=>{this.snackBar.open("Arquivo criado com sucesso","Fechar",{duration:3e3}),this.dialogRef.close()},error:s=>{this.snackBar.open("Erro ao criar arquivo","Fechar",{duration:3e3}),console.error("Erro ao criar arquivo:",s)}})}close(){this.dialogRef.close()}update(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.so),t.Y36(m.WI),t.Y36(c.qu),t.Y36(x.ux),t.Y36(N))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-file-dialog"]],decls:13,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"align-right"],["mat-button","",3,"click"],[1,"right-buttons"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click"],["appearance","fill",2,"width","100%"],["matInput","",3,"formControlName"]],template:function(o,i){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Dados do arquivo JSON"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,b,5,2,"div",3),t.qZA()(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return i.close()}),t._uU(7,"Fechar"),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return i.update()}),t._uU(10,"Atualizar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.create()}),t._uU(12,"Novo"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("formGroup",i.fileForm),t.xp6(1),t.Q6J("ngForOf",i.formKeys))},dependencies:[g.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,v.lW,f.KE,f.hX,C.Nt,m.uh,m.xY,m.H8],styles:[".align-right[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.right-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}"]}),e})();var S=l(9350),p=l(1576),y=l(3546);function _(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1," Name "),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.fileName," ")}}function E(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," A\xe7\xe3o "),t.qZA())}function M(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",18)(1,"button",20),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.openFileDialog(s))}),t._uU(2,"Abrir"),t.qZA()()}}function U(e,n){1&e&&t._UZ(0,"tr",21)}function k(e,n){1&e&&t._UZ(0,"tr",22)}const O=[{path:"",component:T.$,children:[{path:"",component:(()=>{class e{constructor(o,i){this.dialog=o,this.fileService=i,this.files=[],this.displayedColumns=["fileName","actions"],this.dataSource=new r.by(this.files),this.sort=new d.YE,this.directoryPath="datasets/arquivos"}ngOnInit(){this.dataSource.sort=this.sort}getFiles(){this.fileService.getFiles(this.directoryPath).subscribe(o=>{this.files=o,this.dataSource.data=this.files})}openFileDialog(o){const i=JSON.parse(atob(o.contentBase64));this.dialog.open(J,{width:"400px",data:i})}clearFolders(){this.directoryPath="",this.files=[],this.dataSource.data=this.files}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.uw),t.Y36(S.I))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-files"]],viewQuery:function(o,i){if(1&o&&t.Gf(d.YE,7),2&o){let a;t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:27,vars:4,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],[1,"mat-typography"],[1,"mat-display-1"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","10px"],["fxFlex",""],["matInput","","placeholder","Digite o caminho do diret\xf3rio",3,"ngModel","ngModelChange","keyup.enter"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","fileName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content")(4,"h2"),t._uU(5,"Arquivos"),t.qZA(),t.TgZ(6,"div",2)(7,"div",3),t._uU(8,"Editar arquivos"),t.qZA(),t.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),t._uU(12,"Selecionar arquivo"),t.qZA(),t.TgZ(13,"input",6),t.NdJ("ngModelChange",function(s){return i.directoryPath=s})("keyup.enter",function(){return i.getFiles()}),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.getFiles()}),t._uU(15,"Buscar"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return i.clearFolders()}),t._uU(17,"Limpar"),t.qZA()(),t.TgZ(18,"table",9),t.ynx(19,10),t.YNc(20,_,2,0,"th",11),t.YNc(21,Y,2,1,"td",12),t.BQk(),t.ynx(22,13),t.YNc(23,E,2,0,"th",14),t.YNc(24,M,3,0,"td",12),t.BQk(),t.YNc(25,U,1,0,"tr",15),t.YNc(26,k,1,0,"tr",16),t.qZA()()()()()()),2&o&&(t.xp6(13),t.Q6J("ngModel",i.directoryPath),t.xp6(5),t.Q6J("dataSource",i.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[c.Fj,c.JJ,c.On,p.xw,p.SQ,p.Wh,p.yH,v.lW,y.a8,y.dn,f.KE,f.hX,C.Nt,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,d.YE,d.nU],styles:["table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}"]}),e})()}]}];let Q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[F.Bz.forChild(O),F.Bz]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,Q,Z.m]}),e})()}}]);